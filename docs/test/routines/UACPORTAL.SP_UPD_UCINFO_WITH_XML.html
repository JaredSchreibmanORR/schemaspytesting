<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>ORCL.UACPORTAL</title>
        <!-- Tell the browser to be responsive to screen width -->
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
        <link rel="icon" type="image/png" sizes="16x16" href="../favicon.png">
        <!-- Bootstrap 3.3.5 -->
        <link rel="stylesheet" href="../bower/admin-lte/bootstrap/css/bootstrap.min.css">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="../bower/font-awesome/css/font-awesome.min.css">
        <!-- Ionicons -->
        <link rel="stylesheet" href="../bower/ionicons/css/ionicons.min.css">
        <!-- DataTables -->
        <link rel="stylesheet" href="../bower/datatables.net-bs/css/dataTables.bootstrap.min.css">
        <link rel="stylesheet" href="../bower/datatables.net-buttons-bs/css/buttons.bootstrap.min.css">
        <!-- Code Mirror -->
        <link rel="stylesheet" href="../bower/codemirror/codemirror.css">
        <!-- Fonts -->
        <link href='../fonts/indieflower/indie-flower.css' rel='stylesheet' type='text/css'>
        <link href='../fonts/source-sans-pro/source-sans-pro.css' rel='stylesheet' type='text/css'>

        <!-- Theme style -->
        <link rel="stylesheet" href="../bower/admin-lte/dist/css/AdminLTE.min.css">
        <!-- Salvattore -->
        <link rel="stylesheet" href="../bower/salvattore/salvattore.css">
        <!-- AdminLTE Skins. Choose a skin from the css/skins
           folder instead of downloading all of them to reduce the load. -->
        <link rel="stylesheet" href="../bower/admin-lte/dist/css/skins/_all-skins.min.css">
        <!-- SchemaSpy -->
        <link rel="stylesheet" href="../schemaSpy.css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="../bower/html5shiv/html5shiv.min.js"></script>
        <script src="../bower/respond/respond.min.js"></script>
        <![endif]-->
    </head>
    <!-- ADD THE CLASS layout-top-nav TO REMOVE THE SIDEBAR. -->
    <body class="hold-transition skin-blue layout-top-nav">
        <div class="wrapper">
            <header class="main-header">
                <nav class="navbar navbar-static-top">
                    <div class="container">
                        <div class="navbar-header">
                            <a href="../index.html" class="navbar-brand"><b>ORCL</b></a><span class="navbar-brand" style="padding-left: 0">.UACPORTAL</span>
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse"><i class="fa fa-bars"></i></button>
                        </div>

                        <!-- Collect the nav links, forms, and other content for toggling -->
                        <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                            <ul class="nav navbar-nav">
                                <li><a href="../index.html">Tables <span class="sr-only">(current)</span></a></li>
                                <li><a href="../columns.html" title="All of the columns in the schema">Columns</a></li>
                                <li><a href="../constraints.html" title="Useful for diagnosing error messages that just give constraint name or number">Constraints</a></li>
                                <li><a href="../relationships.html" title="Diagram of table relationships">Relationships</a></li>
                                <li><a href="../orphans.html" title="View of tables with neither parents nor children">Orphan&nbsp;Tables</a></li>
                                <li><a href="../anomalies.html" title="Things that might not be quite right">Anomalies</a></li>
                                <li><a href="../routines.html" title="Procedures and functions">Routines</a></li>
                            </ul>
                        </div>
                        <!-- /.navbar-collapse -->
                        <!-- Navbar Right Menu -->
                    </div>
                    <!-- /.container-fluid -->
                </nav>
            </header>
            <!-- Main content -->
            <!-- Full Width Column -->
            <div class="content-wrapper">
                <!-- Content Header (Page header) -->
                <section class="content-header">
                    <h1>UACPORTAL.SP_UPD_UCINFO_WITH_XML</h1><br />
                </section>
                <!-- Main content -->
                <section class="content">
                    <div class="box box-primary">
                        <div class="box-header with-border">
                            <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>
                            <h3 id="Columns" class="box-title">Parameters</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <table id="standard_table" class="table table-bordered table-striped dataTable" role="grid">
                                <thead align='left'>
                                <tr>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Mode</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>PAGETYPE</td>
                                    <td>VARCHAR2</td>
                                    <td>IN</td>
                                </tr>
                                <tr>
                                    <td>XMLTOKEN</td>
                                    <td>VARCHAR2</td>
                                    <td>IN</td>
                                </tr>
                                <tr>
                                    <td>VSTATUS</td>
                                    <td>VARCHAR2</td>
                                    <td>OUT</td>
                                </tr>
                                <tr>
                                    <td>VSPONSORID</td>
                                    <td>NUMBER</td>
                                    <td>OUT</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="box box-primary">
                        <div class="box-header with-border">
                            <i class="fa fa-file-code-o"></i>
                            <h3 id="RoutineDefinition" class="box-title">Definition</h3>
                            <div class="box-tools pull-right">
                                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <textarea id="sql-script-codemirror" name="sql-script-codemirror" rows="" style="display: none;">PROCEDURE           SP_UPD_UCINFO_WITH_XML &#10;(&#10;  PageType  IN VARCHAR2,&#10;  xmlToken  IN VARCHAR2,&#10;  vStatus OUT NOCOPY VARCHAR2,&#10;  vSponsorId OUT NOCOPY NUMBER&#10;  --, xmlData  IN  CLOB&#10;) AS &#10;&#10;xmlData_  XMLType;&#10;sId_     NUMBER;&#10;ns_    VARCHAR2(250); -- Namespace&#10;pageType_ VARCHAR2(100) :&#61; Upper(PageType);&#10;sUptime TimeStamp(6);&#10;uUptime TimeStamp(6);&#10;n     NUMBER(1);&#10;currTime  TIMESTAMP(6) :&#61; current_timestamp;&#10;uacId_  NUMBER;&#10;currentSponsor  NUMBER(1) :&#61; 0;&#10;BEGIN&#10;  vStatus :&#61; &#39;SUCCESS SUCCESS&#39;;&#10;  --xmlData_ :&#61; XMLTYPE(xmlData);&#10;  Select XMLTYPE(XML_DATA) into xmlData_ from TT_XMLDATA Where XML_TOKEN &#61; xmlToken;&#10;  If pageType_ &#61; &#39;NEWSPONSOR&#39; Then&#10;    Select SPONSOR_ID, to_timestamp_tz(UPTIME, &#39;YYYY-MM-DD&quot;T&quot;HH24:MI:SS.FF9tzh:tzm&#39;)  Into sId_, sUptime &#10;    from XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;      &#39;/DS_UCPortal/SPONSOR_INFO&#39;&#10;      Passing xmlData_&#10;      Columns &#10;      SPONSOR_ID NUMBER path &#39;SPONSOR_ID&#39;,&#10;      UPTIME  VARCHAR2(100) path &#39;UPTIME&#39;&#10;    );&#10;&#10;    Select UAC_ID,to_timestamp_tz(UPTIME, &#39;YYYY-MM-DD&quot;T&quot;HH24:MI:SS.FF9tzh:tzm&#39;)  Into uacId_, uUptime &#10;      From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;        &#39;/DS_UCPortal/UAC_SPONSOR_LIST&#39;&#10;        Passing xmlData_&#10;        Columns &#10;        UAC_ID  NUMBER path &#39;UAC_ID&#39;,&#10;        UPTIME  VARCHAR2(100) path &#39;UPTIME&#39;&#10;      );&#10;    If sId_ is null Then&#10;      sId_ :&#61; SEQ_SPONSOR_INFO.NEXTVAL;&#10;      vSponsorId :&#61; sId_;&#10;&#10;      Insert Into SPONSOR_INFO (SPONSOR_ID, FIRST_NAME, LAST_NAME, SSN, ALIEN_NO, ADDRESS, ADDRESS_SECONDARY, CITY, STATE, ZIP_CODE, DOB, COB, COR, MARRIAGE_STATUS, HOME_PHONE,&#10;      WORK_PHONE, FAX, EMAIL, GENDER, LEGAL_STATUS_ID, HOUSEHOLD_HAS_DISEASE, HOUSEHOLD_HAS_CRIMINAL_HIST, NOTES,&#10;      DATE_CREATED, USER_CREATED, UPTIME, UPUSER, FLAG, FLAG_NOTE, FLAG_ADDRESS, FLAG_ADDRESS_NOTE, LATITUDE, LONGITUDE, COUNTY, SMARTY_STREET_VALIDATION&#10;      )&#10;      Select sId_, FIRST_NAME, LAST_NAME, SSN, ALIEN_NO, ADDRESS, ADDRESS_SECONDARY, CITY, STATE, ZIP_CODE, to_timestamp_tz(DOB, &#39;YYYY-MM-DD&quot;T&quot;HH24:MI:SS.FF9tzh:tzm&#39;), COB, COR, MARRIAGE_STATUS, HOME_PHONE,&#10;      WORK_PHONE, FAX, EMAIL, GENDER, LEGAL_STATUS_ID, HOUSEHOLD_HAS_DISEASE, HOUSEHOLD_HAS_CRIMINAL_HIST, NOTES,&#10;      currTime, USER_CREATED, currTime, UPUSER, FLAG, FLAG_NOTE, FLAG_ADDRESS, FLAG_ADDRESS_NOTE, LATITUDE, LONGITUDE, COUNTY, SMARTY_STREET_VALIDATION&#10;      From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;      &#39;/DS_UCPortal/SPONSOR_INFO&#39;&#10;      Passing xmlData_&#10;      Columns &#10;        FIRST_NAME  VARCHAR2(2000) path &#39;FIRST_NAME&#39;,  &#10;        LAST_NAME VARCHAR2(2000) path &#39;LAST_NAME&#39;,  &#10;        SSN VARCHAR2(11) path &#39;SSN&#39;,   &#10;        ALIEN_NO  VARCHAR2(10) path &#39;ALIEN_NO&#39;,&#10;        ADDRESS VARCHAR2(2000) path &#39;ADDRESS&#39;,  &#10;        ADDRESS_SECONDARY VARCHAR2(2000) path &#39;ADDRESS_SECONDARY&#39;,  &#10;        CITY  VARCHAR2(2000) path &#39;CITY&#39;,  &#10;        STATE CHAR(2) path &#39;STATE&#39;,         &#10;        ZIP_CODE  VARCHAR2(10) path &#39;ZIP_CODE&#39;,    &#10;        DOB VARCHAR2(50) path &#39;DOB&#39;,            &#10;        COB VARCHAR2(50) path &#39;COB&#39;,&#10;        COR VARCHAR2(50) path &#39;COR&#39;,&#10;        MARRIAGE_STATUS VARCHAR2(7) path &#39;MARRIAGE_STATUS&#39;,     &#10;        HOME_PHONE  VARCHAR2(22) path &#39;HOME_PHONE&#39;,   &#10;        WORK_PHONE  VARCHAR2(22) path &#39;WORK_PHONE&#39;,    &#10;        FAX VARCHAR2(22) path &#39;FAX&#39;,    &#10;        EMAIL VARCHAR2(112) path &#39;EMAIL&#39;,&#10;        GENDER  CHAR(1) path &#39;GENDER&#39;,         &#10;        LEGAL_STATUS_ID NUMBER(3) path &#39;LEGAL_STATUS_ID&#39;,&#10;        HOUSEHOLD_HAS_DISEASE NUMBER(1) path &#39;HOUSEHOLD_HAS_DISEASE&#39;,&#10;        HOUSEHOLD_HAS_CRIMINAL_HIST NUMBER(1) path &#39;HOUSEHOLD_HAS_CRIMINAL_HIST&#39;,&#10;        NOTES VARCHAR2(32000) path &#39;NOTES&#39;,           &#10;        USER_CREATED  VARCHAR2(112) path &#39;USER_CREATED&#39;,    &#10;        UPUSER  VARCHAR2(112) path &#39;UPUSER&#39;,&#10;        FLAG  NUMBER(1) path &#39;FLAG&#39;,       &#10;        FLAG_NOTE VARCHAR2(4000) path &#39;FLAG_NOTE&#39;,&#10;        FLAG_ADDRESS  NUMBER(1) path &#39;FLAG_ADDRESS&#39;,       &#10;        FLAG_ADDRESS_NOTE VARCHAR2(4000) path &#39;FLAG_ADDRESS_NOTE&#39;,&#10;        LATITUDE VARCHAR2(2000) path &#39;LATITUDE&#39;,  &#10;        LONGITUDE VARCHAR2(2000) path &#39;LONGITUDE&#39;,  &#10;        COUNTY VARCHAR2(2000) path &#39;ADDRESS_SECONDARY&#39;,  &#10;        SMARTY_STREET_VALIDATION VARCHAR2(2000) path &#39;SMARTY_STREET_VALIDATION&#39;  &#10;      );&#10;&#10;      Insert Into UAC_SPONSOR_LIST (UAC_ID, SPONSOR_ID, CURRENT_SPONSOR, SPONSOR_ADDRESS, SPONSOR_ADDRESS_SECONDARY, SPONSOR_CITY, SPONSOR_STATE,SPONSOR_ZIPCODE,&#10;      SPONSOR_HOME_PHONE, SPONSOR_WORK_PHONE, SPONSOR_FAX, SPONSOR_EMAIL, SPONSOR_RELATIONSHIP_TO_UAC, UAC_RELATIONSHIP_TO_SPONSOR,&#10;      COMMENTS, DATE_CREATED, USER_CREATED, UPTIME, UPUSER, QUERY_ID, BACKUP_PHONE_TYPE, SPONSOR_LATITUDE, SPONSOR_LONGITUDE, SPONSOR_COUNTY, SMARTY_STREET_VALIDATION)&#10;      Select UAC_ID, sId_, CURRENT_SPONSOR, SPONSOR_ADDRESS, SPONSOR_ADDRESS_SECONDARY, SPONSOR_CITY, SPONSOR_STATE,SPONSOR_ZIPCODE,&#10;      SPONSOR_HOME_PHONE, SPONSOR_WORK_PHONE, SPONSOR_FAX, SPONSOR_EMAIL, SPONSOR_RELATIONSHIP_TO_UAC, UAC_RELATIONSHIP_TO_SPONSOR,&#10;      COMMENTS, currTime, USER_CREATED, currTime, UPUSER, QUERY_ID, BACKUP_PHONE_TYPE, SPONSOR_LATITUDE, SPONSOR_LONGITUDE, SPONSOR_COUNTY, SMARTY_STREET_VALIDATION&#10;      From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;      &#39;/DS_UCPortal/UAC_SPONSOR_LIST&#39;&#10;      Passing xmlData_&#10;      Columns &#10;        UAC_ID NUMBER path &#39;UAC_ID&#39;,&#10;        CURRENT_SPONSOR NUMBER path &#39;CURRENT_SPONSOR&#39;,&#10;        SPONSOR_ADDRESS VARCHAR2(2000) path &#39;SPONSOR_ADDRESS&#39;,&#10;        SPONSOR_ADDRESS_SECONDARY VARCHAR2(500) path &#39;SPONSOR_ADDRESS_SECONDARY&#39;,&#10;        SPONSOR_CITY VARCHAR2(2000) path &#39;SPONSOR_CITY&#39;,&#10;        SPONSOR_STATE CHAR(2) path &#39;SPONSOR_STATE&#39;,&#10;        SPONSOR_ZIPCODE VARCHAR2(10) path &#39;SPONSOR_ZIPCODE&#39;,&#10;        SPONSOR_HOME_PHONE VARCHAR2(22) path &#39;SPONSOR_HOME_PHONE&#39;,&#10;        SPONSOR_WORK_PHONE VARCHAR2(22) path &#39;SPONSOR_WORK_PHONE&#39;,&#10;        SPONSOR_FAX VARCHAR2(22) path &#39;SPONSOR_FAX&#39;,&#10;        SPONSOR_EMAIL VARCHAR2(112) path &#39;SPONSOR_EMAIL&#39;,&#10;        SPONSOR_RELATIONSHIP_TO_UAC NUMBER path &#39;SPONSOR_RELATIONSHIP_TO_UAC&#39;,&#10;        UAC_RELATIONSHIP_TO_SPONSOR NUMBER path &#39;UAC_RELATIONSHIP_TO_SPONSOR&#39;,&#10;        COMMENTS VARCHAR2(32000) path &#39;COMMENTS&#39;,&#10;        USER_CREATED VARCHAR2(112) path &#39;USER_CREATED&#39;,&#10;        UPUSER VARCHAR2(112) path &#39;UPUSER&#39;,&#10;        QUERY_ID  VARCHAR2(7) path &#39;QUERY_ID&#39;,&#10;&#9;&#9;BACKUP_PHONE_TYPE Number path &#39;BACKUP_PHONE_TYPE&#39;,&#10;        SPONSOR_LATITUDE VARCHAR2(2000) path &#39;SPONSOR_LATITUDE&#39;,  &#10;        SPONSOR_LONGITUDE VARCHAR2(2000) path &#39;SPONSOSR_LONGITUDE&#39;,  &#10;        SPONSOR_COUNTY VARCHAR2(2000) path &#39;SPONSOR_ADDRESS_SECONDARY&#39;,  &#10;        SMARTY_STREET_VALIDATION VARCHAR2(2000) path &#39;SMARTY_STREET_VALIDATION&#39;     &#10;      );&#10;&#10;      Insert into SPONSOR_AFFIDAVITS_SUPPORT(AFFIDAVIT_ID, SPONSOR_ID, ANNUAL_INCOME, PROOF_OF_INCOME, EMP_NAME, EMP_ADDRESS,&#10;        EMP_CITY, EMP_STATE, EMP_ZIPCODE, EMP_PHONE, HAS_DOC_SUPPORT, DATE_CREATED, USER_CREATED, UPTIME, UPUSER)&#10;      Select SEQ_SPONSOR_AFFIDAVITS.NEXTVAL, sId_, ANNUAL_INCOME, PROOF_OF_INCOME, EMP_NAME, EMP_ADDRESS,&#10;        EMP_CITY, EMP_STATE, EMP_ZIPCODE, EMP_PHONE, HAS_DOC_SUPPORT, currTime, USER_CREATED, currTime, UPUSER&#10;        From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;        &#39;/DS_UCPortal/SPONSOR_AFFIDAVITS_SUPPORT&#39;&#10;        Passing xmlData_&#10;        Columns &#10;          ANNUAL_INCOME NUMBER path &#39;ANNUAL_INCOME&#39;,&#10;          PROOF_OF_INCOME VARCHAR2(2000) path &#39;PROOF_OF_INCOME&#39;,&#10;          EMP_NAME VARCHAR2(2000) path &#39;EMP_NAME&#39;,&#10;          EMP_ADDRESS VARCHAR2(2000) path &#39;EMP_ADDRESS&#39;,&#10;          EMP_CITY VARCHAR2(2000) path &#39;EMP_CITY&#39;,&#10;          EMP_STATE CHAR(2) path &#39;EMP_STATE&#39;,&#10;          EMP_ZIPCODE VARCHAR2(10) path &#39;EMP_ZIPCODE&#39;,&#10;          EMP_PHONE VARCHAR2(22) path &#39;EMP_PHONE&#39;,&#10;          HAS_DOC_SUPPORT NUMBER path &#39;HAS_DOC_SUPPORT&#39;,&#10;          USER_CREATED VARCHAR2(112) path &#39;USER_CREATED&#39;,&#10;          UPUSER VARCHAR2(112) path &#39;UPUSER&#39;&#10;        )&#10;        Where existsnode(xmlData_, &#39;/DS_UCPortal/SPONSOR_AFFIDAVITS_SUPPORT&#39;, &#39;xmlns&#61;&quot;http://tempuri.org/DS_UCPortal.xsd&quot;&#39;) &#61; 1;&#10;&#10;      Insert into SPONSOR_HOUSEHOLD_OCCUPANTS(OCCUPANT_ID, SPONSOR_ID, UAC_ID, NAME_OF_OCCUPANT,FIRST_NAME, LAST_NAME, GENDER, DOB, AGE, RELATIONSHIP_TO_SPONSOR,&#10;        DEPENDENT_OF_SPONSOR, USER_CREATED, DATE_CREATED, UPTIME, UPUSER,&#10;        QUERY_ID)&#10;      Select SEQ_SPONSOR_HH.nextval,sId_, UAC_ID, NAME_OF_OCCUPANT, FIRST_NAME, LAST_NAME, GENDER, to_timestamp_tz(DOB,&#39;YYYY-MM-DD&quot;T&quot;HH24:MI:SS.FF9tzh:tzm&#39;), AGE, RELATIONSHIP_TO_SPONSOR,&#10;        DEPENDENT_OF_SPONSOR, USER_CREATED, currTime,currTime, UPUSER,&#10;        QUERY_ID&#10;      From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;        &#39;/DS_UCPortal/SPONSOR_HOUSEHOLD_OCCUPANTS&#39;&#10;        Passing xmlData_&#10;        Columns &#10;          UAC_ID NUMBER path &#39;UAC_ID&#39;,&#10;          NAME_OF_OCCUPANT VARCHAR2(2000) path &#39;NAME_OF_OCCUPANT&#39;,&#10;          FIRST_NAME VARCHAR2(2000) path &#39;FIRST_NAME&#39;,&#10;          LAST_NAME VARCHAR2(2000) path &#39;LAST_NAME&#39;,&#10;          GENDER CHAR(1) path &#39;GENDER&#39;,&#10;          DOB VARCHAR2(50) path &#39;DOB&#39;,&#10;          AGE NUMBER path &#39;AGE&#39;,&#10;          RELATIONSHIP_TO_SPONSOR NUMBER path &#39;RELATIONSHIP_TO_SPONSOR&#39;,&#10;          DEPENDENT_OF_SPONSOR NUMBER(22) path &#39;DEPENDENT_OF_SPONSOR&#39;,&#10;          USER_CREATED VARCHAR2(112) path &#39;USER_CREATED&#39;,&#10;          UPUSER VARCHAR2(112) path &#39;UPUSER&#39;,&#10;          QUERY_ID VARCHAR2(7) path &#39;QUERY_ID&#39;&#10;        )&#10;        Where existsnode(xmlData_, &#39;/DS_UCPortal/SPONSOR_HOUSEHOLD_OCCUPANTS&#39;, &#39;xmlns&#61;&quot;http://tempuri.org/DS_UCPortal.xsd&quot;&#39;) &#61; 1;&#10;    Else&#10;        vSponsorId :&#61; sId_;&#10;      /*&#10;      Select count(*) into n From (&#10;        Select 1 from SPONSOR_INFO Where DateDiff(&#39;Sec&#39;,UPTIME, sUptime) &#61; 0 And To_NUMBER(To_Char(UPTIME, &#39;FF9&#39;)) &#61; TO_NUMBER(TO_CHAR(sUptime, &#39;FF9&#39;)) And Uptime is not null And SPONSOR_ID &#61; sId_&#10;        Union&#10;        Select 0 from dual&#10;      );&#10;      If n &#61; 1 Then &#10;        vStatus :&#61; &#39;Someone just updated the record. Please refresh the page and apply your change to new record.&#39;;&#10;        GOTO ENDPOINT;&#10;      End If;&#10;      */&#10;      Select count(*) into n From (&#10;        Select 1 from UAC_SPONSOR_LIST Where SPONSOR_ID &#61; sId_ And UAC_ID &#61; uacId_&#10;        Union&#10;        Select 0 from dual&#10;      );&#10;&#10;      UPDATE SPONSOR_INFO A SET (FIRST_NAME, LAST_NAME, SSN, ALIEN_NO, DOB, COB, COR, MARRIAGE_STATUS,&#10;        GENDER, LEGAL_STATUS_ID, HOUSEHOLD_HAS_DISEASE, HOUSEHOLD_HAS_CRIMINAL_HIST,&#10;        UPTIME, UPUSER, FLAG, FLAG_NOTE, FLAG_ADDRESS, FLAG_ADDRESS_NOTE,HOME_PHONE, WORK_PHONE, FAX, EMAIL,LATITUDE, LONGITUDE, COUNTY, &#10;        SMARTY_STREET_VALIDATION, ADDRESS, ADDRESS_SECONDARY, CITY, STATE, ZIP_CODE, NOTES, BACKUP_PHONE_TYPE&#10;        ) &#10;        &#61; (Select FIRST_NAME, LAST_NAME, SSN, ALIEN_NO,  to_timestamp_tz(DOB, &#39;YYYY-MM-DD&quot;T&quot;HH24:MI:SS.FF9tzh:tzm&#39;), COB, COR, MARRIAGE_STATUS, &#10;          GENDER, LEGAL_STATUS_ID, HOUSEHOLD_HAS_DISEASE, HOUSEHOLD_HAS_CRIMINAL_HIST,&#10;          currTime , UPUSER, FLAG, FLAG_NOTE, FLAG_ADDRESS, FLAG_ADDRESS_NOTE,HOME_PHONE, WORK_PHONE, FAX, EMAIL,LATITUDE, LONGITUDE, COUNTY, &#10;          SMARTY_STREET_VALIDATION, ADDRESS, ADDRESS_SECONDARY, CITY, STATE, ZIP_CODE, NOTES, BACKUP_PHONE_TYPE&#10;          From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;          &#39;/DS_UCPortal/SPONSOR_INFO&#39;&#10;          Passing xmlData_&#10;          Columns &#10;            SPONSOR_ID  NUMBER path &#39;SPONSOR_ID&#39;,&#10;            FIRST_NAME  VARCHAR2(2000) path &#39;FIRST_NAME&#39;,  &#10;            LAST_NAME VARCHAR2(2000) path &#39;LAST_NAME&#39;,  &#10;            SSN VARCHAR2(11) path &#39;SSN&#39;,   &#10;            ALIEN_NO  VARCHAR2(10) path &#39;ALIEN_NO&#39;,   &#10;            DOB VARCHAR2(40) path &#39;DOB&#39;,            &#10;            COB VARCHAR2(50) path &#39;COB&#39;,&#10;            COR VARCHAR2(50) path &#39;COR&#39;,&#10;            MARRIAGE_STATUS VARCHAR2(7) path &#39;MARRIAGE_STATUS&#39;,     &#10;            GENDER  CHAR(1) path &#39;GENDER&#39;,         &#10;            LEGAL_STATUS_ID NUMBER(3) path &#39;LEGAL_STATUS_ID&#39;,      &#10;            HOUSEHOLD_HAS_DISEASE NUMBER(1) path &#39;HOUSEHOLD_HAS_DISEASE&#39;,&#10;            HOUSEHOLD_HAS_CRIMINAL_HIST NUMBER(1) path &#39;HOUSEHOLD_HAS_CRIMINAL_HIST&#39;,    &#10;            UPUSER  VARCHAR2(112) path &#39;UPUSER&#39;,&#10;            FLAG  NUMBER(1) path &#39;FLAG&#39;,       &#10;            FLAG_NOTE VARCHAR2(4000) path &#39;FLAG_NOTE&#39;,&#10;            FLAG_ADDRESS  NUMBER(1) path &#39;FLAG_ADDRESS&#39;,       &#10;            FLAG_ADDRESS_NOTE VARCHAR2(4000) path &#39;FLAG_ADDRESS_NOTE&#39;,&#10;&#9;        HOME_PHONE  VARCHAR2(22) path &#39;HOME_PHONE&#39;,   &#10;&#9;        WORK_PHONE  VARCHAR2(22) path &#39;WORK_PHONE&#39;,    &#10;&#9;        FAX VARCHAR2(22) path &#39;FAX&#39;,    &#10;&#9;        EMAIL VARCHAR2(112) path &#39;EMAIL&#39;,&#10;&#9;        LATITUDE VARCHAR2(2000) path &#39;LATITUDE&#39;,  &#10;&#9;        LONGITUDE VARCHAR2(2000) path &#39;LONGITUDE&#39;,  &#10;&#9;        COUNTY VARCHAR2(2000) path &#39;ADDRESS_SECONDARY&#39;,  &#10;&#9;        SMARTY_STREET_VALIDATION VARCHAR2(2000) path &#39;SMARTY_STREET_VALIDATION&#39;, &#10;    &#9;    ADDRESS VARCHAR2(2000) path &#39;ADDRESS&#39;,  &#10; &#9;        ADDRESS_SECONDARY VARCHAR2(2000) path &#39;ADDRESS_SECONDARY&#39;,  &#10;        &#9;CITY  VARCHAR2(2000) path &#39;CITY&#39;,  &#10;        &#9;STATE CHAR(2) path &#39;STATE&#39;,         &#10;        &#9;ZIP_CODE  VARCHAR2(10) path &#39;ZIP_CODE&#39;, &#10;        &#9;NOTES VARCHAR2(32000) path &#39;NOTES&#39;,&#10;            BACKUP_PHONE_TYPE Number path &#39;BACKUP_PHONE_TYPE&#39;&#10;          )&#10;          Where SPONSOR_ID is not null And SPONSOR_ID &#61; A.SPONSOR_ID&#10;        )&#10;        Where A.SPONSOR_ID &#61; sId_;&#10;&#10;      If n &#61; 1 Then &#10;        Insert Into UAC_SPONSOR_LIST (UAC_ID, SPONSOR_ID, CURRENT_SPONSOR, SPONSOR_ADDRESS, SPONSOR_ADDRESS_SECONDARY, SPONSOR_CITY, SPONSOR_STATE,SPONSOR_ZIPCODE,&#10;        SPONSOR_HOME_PHONE, SPONSOR_WORK_PHONE, SPONSOR_FAX, SPONSOR_EMAIL, SPONSOR_RELATIONSHIP_TO_UAC, UAC_RELATIONSHIP_TO_SPONSOR,&#10;        COMMENTS, DATE_CREATED, USER_CREATED, UPTIME, UPUSER, QUERY_ID, BACKUP_PHONE_TYPE, SPONSOR_LATITUDE, SPONSOR_LONGITUDE, SPONSOR_COUNTY, SMARTY_STREET_VALIDATION)&#10;        Select UAC_ID, SPONSOR_ID, CURRENT_SPONSOR, SPONSOR_ADDRESS, SPONSOR_ADDRESS_SECONDARY, SPONSOR_CITY, SPONSOR_STATE,SPONSOR_ZIPCODE,&#10;        SPONSOR_HOME_PHONE, SPONSOR_WORK_PHONE, SPONSOR_FAX, SPONSOR_EMAIL, SPONSOR_RELATIONSHIP_TO_UAC, UAC_RELATIONSHIP_TO_SPONSOR,&#10;        COMMENTS, currTime, USER_CREATED, currTime, UPUSER,QUERY_ID, BACKUP_PHONE_TYPE, SPONSOR_LATITUDE, SPONSOR_LONGITUDE, SPONSOR_COUNTY, SMARTY_STREET_VALIDATION&#10;        From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;        &#39;/DS_UCPortal/UAC_SPONSOR_LIST&#39;&#10;        Passing xmlData_&#10;        Columns &#10;          SPONSOR_ID  NUMBER path &#39;SPONSOR_ID&#39;,&#10;          UAC_ID NUMBER path &#39;UAC_ID&#39;,&#10;          CURRENT_SPONSOR NUMBER path &#39;CURRENT_SPONSOR&#39;,&#10;          SPONSOR_ADDRESS VARCHAR2(2000) path &#39;SPONSOR_ADDRESS&#39;,&#10;          SPONSOR_ADDRESS_SECONDARY VARCHAR2(500) path &#39;SPONSOR_ADDRESS_SECONDARY&#39;,&#10;          SPONSOR_CITY VARCHAR2(2000) path &#39;SPONSOR_CITY&#39;,&#10;          SPONSOR_STATE CHAR(2) path &#39;SPONSOR_STATE&#39;,&#10;          SPONSOR_ZIPCODE VARCHAR2(10) path &#39;SPONSOR_ZIPCODE&#39;,&#10;          SPONSOR_HOME_PHONE VARCHAR2(22) path &#39;SPONSOR_HOME_PHONE&#39;,&#10;          SPONSOR_WORK_PHONE VARCHAR2(22) path &#39;SPONSOR_WORK_PHONE&#39;,&#10;          SPONSOR_FAX VARCHAR2(22) path &#39;SPONSOR_FAX&#39;,&#10;          SPONSOR_EMAIL VARCHAR2(112) path &#39;SPONSOR_EMAIL&#39;,&#10;          SPONSOR_RELATIONSHIP_TO_UAC NUMBER path &#39;SPONSOR_RELATIONSHIP_TO_UAC&#39;,&#10;          UAC_RELATIONSHIP_TO_SPONSOR NUMBER path &#39;UAC_RELATIONSHIP_TO_SPONSOR&#39;,&#10;          COMMENTS VARCHAR2(32000) path &#39;COMMENTS&#39;,&#10;          USER_CREATED VARCHAR2(112) path &#39;USER_CREATED&#39;,&#10;          UPUSER VARCHAR2(112) path &#39;UPUSER&#39;,&#10;          QUERY_ID  VARCHAR2(7) path &#39;QUERY_ID&#39;,&#10;&#9;&#9;  SPONSOR_LATITUDE VARCHAR2(2000) path &#39;LATITUDE&#39;,  &#10;&#9;&#9;  SPONSOR_LONGITUDE VARCHAR2(2000) path &#39;LONGITUDE&#39;,  &#10;&#9;&#9;  SPONSOR_COUNTY VARCHAR2(2000) path &#39;ADDRESS_SECONDARY&#39;,  &#10;&#9;&#9;  SMARTY_STREET_VALIDATION VARCHAR2(2000) path &#39;SMARTY_STREET_VALIDATION&#39;,&#10;&#9;&#9;  BACKUP_PHONE_TYPE Number path &#39;BACKUP_PHONE_TYPE&#39;&#10;        );&#10;      Else&#10;        UPDATE UAC_SPONSOR_LIST A SET (CURRENT_SPONSOR, SPONSOR_ADDRESS, SPONSOR_ADDRESS_SECONDARY, SPONSOR_CITY, SPONSOR_STATE,SPONSOR_ZIPCODE,&#10;        SPONSOR_HOME_PHONE, SPONSOR_WORK_PHONE, SPONSOR_FAX, SPONSOR_EMAIL, SPONSOR_RELATIONSHIP_TO_UAC, UAC_RELATIONSHIP_TO_SPONSOR,&#10;        COMMENTS, UPTIME, UPUSER, QUERY_ID, BACKUP_PHONE_TYPE, SPONSOR_LATITUDE, SPONSOR_LONGITUDE, SPONSOR_COUNTY, SMARTY_STREET_VALIDATION) &#61; (&#10;          Select  CURRENT_SPONSOR, SPONSOR_ADDRESS, SPONSOR_ADDRESS_SECONDARY, SPONSOR_CITY, SPONSOR_STATE,SPONSOR_ZIPCODE,&#10;          SPONSOR_HOME_PHONE, SPONSOR_WORK_PHONE, SPONSOR_FAX, SPONSOR_EMAIL, SPONSOR_RELATIONSHIP_TO_UAC, UAC_RELATIONSHIP_TO_SPONSOR,&#10;          COMMENTS, currTime, UPUSER, QUERY_ID, BACKUP_PHONE_TYPE, SPONSOR_LATITUDE, SPONSOR_LONGITUDE, SPONSOR_COUNTY, SMARTY_STREET_VALIDATION&#10;          From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;          &#39;/DS_UCPortal/UAC_SPONSOR_LIST&#39;&#10;          Passing xmlData_&#10;          Columns &#10;            SPONSOR_ID  NUMBER path &#39;SPONSOR_ID&#39;,&#10;            UAC_ID NUMBER path &#39;UAC_ID&#39;,&#10;            CURRENT_SPONSOR NUMBER path &#39;CURRENT_SPONSOR&#39;,&#10;            SPONSOR_ADDRESS VARCHAR2(2000) path &#39;SPONSOR_ADDRESS&#39;,&#10;            SPONSOR_ADDRESS_SECONDARY VARCHAR2(500) path &#39;SPONSOR_ADDRESS_SECONDARY&#39;,&#10;            SPONSOR_CITY VARCHAR2(2000) path &#39;SPONSOR_CITY&#39;,&#10;            SPONSOR_STATE CHAR(2) path &#39;SPONSOR_STATE&#39;,&#10;            SPONSOR_ZIPCODE VARCHAR2(10) path &#39;SPONSOR_ZIPCODE&#39;,&#10;            SPONSOR_HOME_PHONE VARCHAR2(22) path &#39;SPONSOR_HOME_PHONE&#39;,&#10;            SPONSOR_WORK_PHONE VARCHAR2(22) path &#39;SPONSOR_WORK_PHONE&#39;,&#10;            SPONSOR_FAX VARCHAR2(22) path &#39;SPONSOR_FAX&#39;,&#10;            SPONSOR_EMAIL VARCHAR2(112) path &#39;SPONSOR_EMAIL&#39;,&#10;            SPONSOR_RELATIONSHIP_TO_UAC NUMBER path &#39;SPONSOR_RELATIONSHIP_TO_UAC&#39;,&#10;            UAC_RELATIONSHIP_TO_SPONSOR NUMBER path &#39;UAC_RELATIONSHIP_TO_SPONSOR&#39;,&#10;            COMMENTS VARCHAR2(32000) path &#39;COMMENTS&#39;,&#10;            UPUSER VARCHAR2(112) path &#39;UPUSER&#39;,&#10;            QUERY_ID  VARCHAR2(7) path &#39;QUERY_ID&#39;,&#10;&#9;&#9;&#9;BACKUP_PHONE_TYPE Number path &#39;BACKUP_PHONE_TYPE&#39;,&#10;        &#9;SPONSOR_LATITUDE VARCHAR2(2000) path &#39;LATITUDE&#39;,  &#10;        &#9;SPONSOR_LONGITUDE VARCHAR2(2000) path &#39;LONGITUDE&#39;,  &#10;        &#9;SPONSOR_COUNTY VARCHAR2(2000) path &#39;ADDRESS_SECONDARY&#39;,  &#10;        &#9;SMARTY_STREET_VALIDATION VARCHAR2(2000) path &#39;SMARTY_STREET_VALIDATION&#39; &#10;          )&#10;          Where SPONSOR_ID &#61; A.SPONSOR_ID And UAC_ID &#61; A.UAC_ID&#10;        ) Where SPONSOR_ID &#61; sId_ And UAC_ID &#61; uacId_;&#10;      End If;&#10;      -- Update SPONSOR AFFIDAVITS&#10;      -- Insert If it is new&#10;      Insert into SPONSOR_AFFIDAVITS_SUPPORT(AFFIDAVIT_ID, SPONSOR_ID, ANNUAL_INCOME, PROOF_OF_INCOME, EMP_NAME, EMP_ADDRESS,&#10;        EMP_CITY, EMP_STATE, EMP_ZIPCODE, EMP_PHONE, HAS_DOC_SUPPORT, DATE_CREATED, USER_CREATED, UPTIME, UPUSER)&#10;      Select SEQ_SPONSOR_AFFIDAVITS.NEXTVAL, sId_, ANNUAL_INCOME, PROOF_OF_INCOME, EMP_NAME, EMP_ADDRESS,&#10;        EMP_CITY, EMP_STATE, EMP_ZIPCODE, EMP_PHONE, HAS_DOC_SUPPORT, currTime, USER_CREATED, currTime, UPUSER&#10;        From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;        &#39;/DS_UCPortal/SPONSOR_AFFIDAVITS_SUPPORT&#39;&#10;        Passing xmlData_&#10;        Columns &#10;          AFFIDAVIT_ID  NUMBER  path &#39;AFFIDAVIT_ID&#39;,&#10;          ANNUAL_INCOME NUMBER path &#39;ANNUAL_INCOME&#39;,&#10;          PROOF_OF_INCOME VARCHAR2(2000) path &#39;PROOF_OF_INCOME&#39;,&#10;          EMP_NAME VARCHAR2(2000) path &#39;EMP_NAME&#39;,&#10;          EMP_ADDRESS VARCHAR2(2000) path &#39;EMP_ADDRESS&#39;,&#10;          EMP_CITY VARCHAR2(2000) path &#39;EMP_CITY&#39;,&#10;          EMP_STATE CHAR(2) path &#39;EMP_STATE&#39;,&#10;          EMP_ZIPCODE VARCHAR2(10) path &#39;EMP_ZIPCODE&#39;,&#10;          EMP_PHONE VARCHAR2(22) path &#39;EMP_PHONE&#39;,&#10;          HAS_DOC_SUPPORT NUMBER path &#39;HAS_DOC_SUPPORT&#39;,&#10;          USER_CREATED VARCHAR2(112) path &#39;USER_CREATED&#39;,&#10;          UPUSER VARCHAR2(112) path &#39;UPUSER&#39;&#10;        )&#10;        Where existsnode(xmlData_, &#39;/DS_UCPortal/SPONSOR_AFFIDAVITS_SUPPORT&#39;, &#39;xmlns&#61;&quot;http://tempuri.org/DS_UCPortal.xsd&quot;&#39;) &#61; 1&#10;        And AFFIDAVIT_ID is null;&#10;      -- Update if it is existing record.  &#10;      UPDATE SPONSOR_AFFIDAVITS_SUPPORT A SET (ANNUAL_INCOME, PROOF_OF_INCOME, EMP_NAME, EMP_ADDRESS,&#10;        EMP_CITY, EMP_STATE, EMP_ZIPCODE, EMP_PHONE, HAS_DOC_SUPPORT, UPTIME, UPUSER)&#10;      &#61; (&#10;        Select ANNUAL_INCOME, PROOF_OF_INCOME, EMP_NAME, EMP_ADDRESS,&#10;        EMP_CITY, EMP_STATE, EMP_ZIPCODE, EMP_PHONE, HAS_DOC_SUPPORT, currTime, UPUSER&#10;        From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;        &#39;/DS_UCPortal/SPONSOR_AFFIDAVITS_SUPPORT&#39;&#10;        Passing xmlData_&#10;        Columns &#10;          AFFIDAVIT_ID NUMBER path &#39;AFFIDAVIT_ID&#39;,&#10;          ANNUAL_INCOME NUMBER path &#39;ANNUAL_INCOME&#39;,&#10;          PROOF_OF_INCOME VARCHAR2(2000) path &#39;PROOF_OF_INCOME&#39;,&#10;          EMP_NAME VARCHAR2(2000) path &#39;EMP_NAME&#39;,&#10;          EMP_ADDRESS VARCHAR2(2000) path &#39;EMP_ADDRESS&#39;,&#10;          EMP_CITY VARCHAR2(2000) path &#39;EMP_CITY&#39;,&#10;          EMP_STATE CHAR(2) path &#39;EMP_STATE&#39;,&#10;          EMP_ZIPCODE VARCHAR2(10) path &#39;EMP_ZIPCODE&#39;,&#10;          EMP_PHONE VARCHAR2(22) path &#39;EMP_PHONE&#39;,&#10;          HAS_DOC_SUPPORT NUMBER path &#39;HAS_DOC_SUPPORT&#39;,&#10;          USER_CREATED VARCHAR2(112) path &#39;USER_CREATED&#39;,&#10;          UPUSER VARCHAR2(112) path &#39;UPUSER&#39;&#10;        )&#10;        Where existsnode(xmlData_, &#39;/DS_UCPortal/SPONSOR_AFFIDAVITS_SUPPORT&#39;, &#39;xmlns&#61;&quot;http://tempuri.org/DS_UCPortal.xsd&quot;&#39;) &#61; 1 AND AFFIDAVIT_ID is not null&#10;        And AFFIDAVIT_ID &#61; A.AFFIDAVIT_ID&#10;      )&#10;      Where A.AFFIDAVIT_ID IN (Select AFFIDAVIT_ID From  XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;      &#39;/DS_UCPortal/SPONSOR_AFFIDAVITS_SUPPORT&#39;&#10;      Passing xmlData_&#10;      Columns &#10;        AFFIDAVIT_ID NUMBER path &#39;AFFIDAVIT_ID&#39;&#10;      ) Where AFFIDAVIT_ID is not null);&#10;&#10;      -- Update SPONSOR HOUSEHOLD OCCUPANTS&#10;      -- Insert If it is new&#10;      Insert into SPONSOR_HOUSEHOLD_OCCUPANTS(OCCUPANT_ID, SPONSOR_ID, UAC_ID, NAME_OF_OCCUPANT,FIRST_NAME, LAST_NAME, GENDER, DOB, AGE, RELATIONSHIP_TO_SPONSOR,&#10;        DEPENDENT_OF_SPONSOR, USER_CREATED, DATE_CREATED, UPTIME, UPUSER,&#10;        QUERY_ID)&#10;      Select SEQ_SPONSOR_HH.nextval,sId_, UAC_ID, NAME_OF_OCCUPANT, FIRST_NAME, LAST_NAME, GENDER, to_timestamp_tz(DOB,&#39;YYYY-MM-DD&quot;T&quot;HH24:MI:SS.FF9tzh:tzm&#39;), AGE, RELATIONSHIP_TO_SPONSOR,&#10;        DEPENDENT_OF_SPONSOR, USER_CREATED, &#10;        currTime, currTime, UPUSER,&#10;        QUERY_ID&#10;        From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;        &#39;/DS_UCPortal/SPONSOR_HOUSEHOLD_OCCUPANTS&#39;&#10;        Passing xmlData_&#10;        Columns &#10;          OCCUPANT_ID NUMBER path &#39;OCCUPANT_ID&#39;,&#10;          UAC_ID NUMBER path &#39;UAC_ID&#39;,&#10;          NAME_OF_OCCUPANT VARCHAR2(2000) path &#39;NAME_OF_OCCUPANT&#39;,&#10;          FIRST_NAME VARCHAR2(2000) path &#39;FIRST_NAME&#39;,&#10;          LAST_NAME VARCHAR2(2000) path &#39;LAST_NAME&#39;,&#10;          GENDER CHAR(1) path &#39;GENDER&#39;,&#10;          DOB VARCHAR2(50) path &#39;DOB&#39;,&#10;          AGE NUMBER path &#39;AGE&#39;,&#10;          RELATIONSHIP_TO_SPONSOR NUMBER path &#39;RELATIONSHIP_TO_SPONSOR&#39;,&#10;          DEPENDENT_OF_SPONSOR NUMBER(22) path &#39;DEPENDENT_OF_SPONSOR&#39;,&#10;          USER_CREATED VARCHAR2(112) path &#39;USER_CREATED&#39;,&#10;          UPUSER VARCHAR2(112) path &#39;UPUSER&#39;,&#10;          QUERY_ID VARCHAR2(7) path &#39;QUERY_ID&#39;&#10;        )&#10;        Where existsnode(xmlData_, &#39;/DS_UCPortal/SPONSOR_HOUSEHOLD_OCCUPANTS&#39;, &#39;xmlns&#61;&quot;http://tempuri.org/DS_UCPortal.xsd&quot;&#39;) &#61; 1&#10;        And OCCUPANT_ID is null;&#10;&#10;        -- Update if it is existing record&#10;      UPDATE SPONSOR_HOUSEHOLD_OCCUPANTS A SET (NAME_OF_OCCUPANT,FIRST_NAME, LAST_NAME, GENDER, DOB, AGE, RELATIONSHIP_TO_SPONSOR,&#10;        DEPENDENT_OF_SPONSOR, UPTIME, UPUSER,&#10;        QUERY_ID)&#10;      &#61; (&#10;      Select NAME_OF_OCCUPANT, FIRST_NAME, LAST_NAME, GENDER, to_timestamp_tz(DOB,&#39;YYYY-MM-DD&quot;T&quot;HH24:MI:SS.FF9tzh:tzm&#39;), AGE, RELATIONSHIP_TO_SPONSOR,&#10;        DEPENDENT_OF_SPONSOR, currTime, UPUSER,&#10;        QUERY_ID&#10;        From XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;        &#39;/DS_UCPortal/SPONSOR_HOUSEHOLD_OCCUPANTS&#39;&#10;        Passing xmlData_&#10;        Columns &#10;          OCCUPANT_ID NUMBER path &#39;OCCUPANT_ID&#39;,&#10;          NAME_OF_OCCUPANT VARCHAR2(2000) path &#39;NAME_OF_OCCUPANT&#39;,&#10;          FIRST_NAME VARCHAR2(2000) path &#39;FIRST_NAME&#39;,&#10;          LAST_NAME VARCHAR2(2000) path &#39;LAST_NAME&#39;,&#10;          GENDER CHAR(1) path &#39;GENDER&#39;,&#10;          DOB VARCHAR2(50) path &#39;DOB&#39;,&#10;          AGE NUMBER path &#39;AGE&#39;,&#10;          RELATIONSHIP_TO_SPONSOR NUMBER path &#39;RELATIONSHIP_TO_SPONSOR&#39;,&#10;          DEPENDENT_OF_SPONSOR NUMBER(22) path &#39;DEPENDENT_OF_SPONSOR&#39;,&#10;          UPUSER VARCHAR2(112) path &#39;UPUSER&#39;,&#10;          QUERY_ID VARCHAR2(7) path &#39;QUERY_ID&#39;&#10;        )&#10;        Where existsnode(xmlData_, &#39;/DS_UCPortal/SPONSOR_HOUSEHOLD_OCCUPANTS&#39;, &#39;xmlns&#61;&quot;http://tempuri.org/DS_UCPortal.xsd&quot;&#39;) &#61; 1&#10;        And OCCUPANT_ID &#61; A.OCCUPANT_ID And OCCUPANT_ID is not null&#10;      )&#10;      Where A.OCCUPANT_ID in (Select OCCUPANT_ID From  XMLTABLE(XMLNAMESPACES(default &#39;http://tempuri.org/DS_UCPortal.xsd&#39;),&#10;      &#39;/DS_UCPortal/SPONSOR_HOUSEHOLD_OCCUPANTS&#39;&#10;      Passing xmlData_&#10;      Columns &#10;        OCCUPANT_ID NUMBER path &#39;OCCUPANT_ID&#39;&#10;        )&#10;        Where OCCUPANT_ID is not null&#10;      );  &#10;    End If;&#10;&#10;     Update SPONSOR_INFO A Set P_COUNTER &#61; (&#10;        Select COUNT(*) From UAC_SPONSOR_LIST WHERE SPONSOR_ID &#61; A.SPONSOR_ID)&#10;        Where SPONSOR_ID &#61; sId_;&#10;&#10;    Select CURRENT_SPONSOR into currentSponsor From UAC_SPONSOR_LIST where UAC_ID &#61; uacId_ And SPONSOR_ID &#61; sId_;&#10;    if nvl(currentSponsor,0) &#61; 1 then&#10;      Update UAC_SPONSOR_LIST Set CURRENT_SPONSOR &#61; 0 Where UAC_ID &#61; uacId_;&#10;      Update UAC_SPONSOR_LIST Set CURRENT_SPONSOR &#61; 1 Where UAC_ID &#61; uacId_ And SPONSOR_ID &#61; sId_;&#10;    end if;&#10;&#10;  End If;&#10;&lt;&lt;ENDPOINT&gt;&gt;&#10;  Null;&#10;EXCEPTION&#10;  WHEN OTHERS Then&#10;    vStatus :&#61; SQLERRM;&#10;&#10;END SP_UPD_UCINFO_WITH_XML;</textarea>
                        </div>
                    </div>
                </section>
            </div>
            <!-- /.content-wrapper -->
            <footer class="main-footer">
                <div>
                    <div class="pull-right hidden-xs">
                        <a href="https://github.com/schemaspy/schemaspy" title="GitHub for SchemaSpy"><i class="fa fa-github-square fa-2x"></i></a>
                        <a href="http://stackoverflow.com/questions/tagged/schemaspy" title="StackOverflow for SchemaSpy"><i class="fa fa-stack-overflow fa-2x"></i></a>
                    </div>
                    <strong>Generated by <a href="http://schemaspy.org/" class="logo-text"><i class="fa fa-database"></i> SchemaSpy 6.2.4</a></strong>
                </div>
                <!-- /.container -->
            </footer>
        </div>
        <!-- ./wrapper -->

        <!-- jQuery 2.2.3 -->
        <script src="../bower/admin-lte/plugins/jQuery/jquery-2.2.3.min.js"></script>
        <script src="../bower/admin-lte/plugins/jQueryUI/jquery-ui.min.js"></script>
        <!-- Bootstrap 3.3.5 -->
        <script src="../bower/admin-lte/bootstrap/js/bootstrap.min.js"></script>
        <!-- DataTables -->
        <script src="../bower/datatables.net/jquery.dataTables.min.js"></script>
        <script src="../bower/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
        <script src="../bower/datatables.net-buttons/dataTables.buttons.min.js"></script>
        <script src="../bower/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
        <script src="../bower/datatables.net-buttons/buttons.html5.min.js"></script>
        <script src="../bower/datatables.net-buttons/buttons.print.min.js"></script>
        <script src="../bower/datatables.net-buttons/buttons.colVis.min.js"></script>
        <!-- SheetJS -->
        <script src="../bower/js-xlsx/xlsx.full.min.js"></script>
        <!-- pdfmake -->
        <script src="../bower/pdfmake/pdfmake.min.js"></script>
        <script src="../bower/pdfmake/vfs_fonts.js"></script>
        <!-- SlimScroll -->
        <script src="../bower/admin-lte/plugins/slimScroll/jquery.slimscroll.min.js"></script>
        <!-- FastClick -->
        <script src="../bower/admin-lte/plugins/fastclick/fastclick.js"></script>
        <!-- Salvattore -->
        <script src="../bower/salvattore/salvattore.min.js"></script>
        <!-- AnchorJS -->
        <script src="../bower/anchor-js/anchor.min.js"></script>
        <!-- CodeMirror -->
        <script src="../bower/codemirror/codemirror.js"></script>
        <script src="../bower/codemirror/sql.js"></script>
        <!-- AdminLTE App -->
        <script src="../bower/admin-lte/dist/js/app.min.js"></script>
        <script src="routine.js"></script>
        <script src="../schemaSpy.js"></script>
    </body>
</html>